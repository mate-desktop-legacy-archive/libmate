<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>mate-exec</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<link rel="home" href="index.html" title="MATE Library Reference Manual">
<link rel="up" href="ch01.html" title="Initializing Applications and Starting Programs">
<link rel="prev" href="libmate-mate-init.html" title="mate-init">
<link rel="next" href="ch02.html" title="Configuration">
<meta name="generator" content="GTK-Doc V1.15.1 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="libmate-mate-init.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ch01.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">MATE Library Reference Manual</th>
<td><a accesskey="n" href="ch02.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts">
<a href="#libmate-mate-exec.synopsis" class="shortcut">Top</a>
                   | 
                  <a href="#libmate-mate-exec.description" class="shortcut">Description</a>
</td></tr>
</table>
<div class="refentry">
<a name="libmate-mate-exec"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="libmate-mate-exec.top_of_page"></a>mate-exec</span></h2>
<p>mate-exec — Execution of programs from within MATE applications.</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<a name="libmate-mate-exec.synopsis"></a><h2>Synopsis</h2>
<pre class="synopsis">
#include &lt;libmate/libmate.h&gt;

<span class="returnvalue">int</span>                 <a class="link" href="libmate-mate-exec.html#mate-execute-async" title="mate_execute_async ()">mate_execute_async</a>                 (<em class="parameter"><code>const <span class="type">char</span> *dir</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> argc</code></em>,
                                                         <em class="parameter"><code><span class="type">char</span> * const argv[]</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libmate-mate-exec.html#mate-execute-async-fds" title="mate_execute_async_fds ()">mate_execute_async_fds</a>             (<em class="parameter"><code>const <span class="type">char</span> *dir</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> argc</code></em>,
                                                         <em class="parameter"><code><span class="type">char</span> * const argv[]</code></em>,
                                                         <em class="parameter"><code><span class="type">gboolean</span> close_fds</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libmate-mate-exec.html#mate-execute-async-with-env" title="mate_execute_async_with_env ()">mate_execute_async_with_env</a>        (<em class="parameter"><code>const <span class="type">char</span> *dir</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> argc</code></em>,
                                                         <em class="parameter"><code><span class="type">char</span> * const argv[]</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> envc</code></em>,
                                                         <em class="parameter"><code><span class="type">char</span> * const envv[]</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libmate-mate-exec.html#mate-execute-async-with-env-fds" title="mate_execute_async_with_env_fds ()">mate_execute_async_with_env_fds</a>    (<em class="parameter"><code>const <span class="type">char</span> *dir</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> argc</code></em>,
                                                         <em class="parameter"><code><span class="type">char</span> * const argv[]</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> envc</code></em>,
                                                         <em class="parameter"><code><span class="type">char</span> * const envv[]</code></em>,
                                                         <em class="parameter"><code><span class="type">gboolean</span> close_fds</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libmate-mate-exec.html#mate-execute-shell" title="mate_execute_shell ()">mate_execute_shell</a>                 (<em class="parameter"><code>const <span class="type">char</span> *dir</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *commandline</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libmate-mate-exec.html#mate-execute-shell-fds" title="mate_execute_shell_fds ()">mate_execute_shell_fds</a>             (<em class="parameter"><code>const <span class="type">char</span> *dir</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *commandline</code></em>,
                                                         <em class="parameter"><code><span class="type">gboolean</span> close_fds</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="libmate-mate-exec.html#mate-prepend-terminal-to-vector" title="mate_prepend_terminal_to_vector ()">mate_prepend_terminal_to_vector</a>    (<em class="parameter"><code><span class="type">int</span> *argc</code></em>,
                                                         <em class="parameter"><code><span class="type">char</span> ***argv</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libmate-mate-exec.html#mate-execute-terminal-shell" title="mate_execute_terminal_shell ()">mate_execute_terminal_shell</a>        (<em class="parameter"><code>const <span class="type">char</span> *dir</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *commandline</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libmate-mate-exec.html#mate-execute-terminal-shell-fds" title="mate_execute_terminal_shell_fds ()">mate_execute_terminal_shell_fds</a>    (<em class="parameter"><code>const <span class="type">char</span> *dir</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *commandline</code></em>,
                                                         <em class="parameter"><code><span class="type">gboolean</span> close_fds</code></em>);
</pre>
</div>
<div class="refsect1">
<a name="libmate-mate-exec.description"></a><h2>Description</h2>
<p>
The mate-execute family of functions are provided to simplify execution of
programs from withing MATE applications.  These routines are required to avoid
passing opened file descriptors to a child process (like the X11 sockets and
CORBA sockets). They will also make sure to terminate properly.
</p>
<p>
The range of possibilities goes from the most simple use to the most
specialized ones.
</p>
</div>
<div class="refsect1">
<a name="libmate-mate-exec.details"></a><h2>Details</h2>
<div class="refsect2">
<a name="mate-execute-async"></a><h3>mate_execute_async ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 mate_execute_async                 (<em class="parameter"><code>const <span class="type">char</span> *dir</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> argc</code></em>,
                                                         <em class="parameter"><code><span class="type">char</span> * const argv[]</code></em>);</pre>
<p>
Like <a class="link" href="libmate-mate-exec.html#mate-execute-async-with-env" title="mate_execute_async_with_env ()"><code class="function">mate_execute_async_with_env()</code></a>, but doesn't add anything
to child's environment.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>dir</code></em> :</span></p></td>
<td>Directory in which child should be executesd, or <a href="/opt/mate2/share/gtk-doc/html/liboil/liboil-liboiljunk.html#NULL--CAPS"><code class="literal">NULL</code></a> for current
      directory
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>argc</code></em> :</span></p></td>
<td>Number of arguments
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>argv</code></em> :</span></p></td>
<td>Argument vector to exec child
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> process id of child, or <code class="literal">-1</code> on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="mate-execute-async-fds"></a><h3>mate_execute_async_fds ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 mate_execute_async_fds             (<em class="parameter"><code>const <span class="type">char</span> *dir</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> argc</code></em>,
                                                         <em class="parameter"><code><span class="type">char</span> * const argv[]</code></em>,
                                                         <em class="parameter"><code><span class="type">gboolean</span> close_fds</code></em>);</pre>
<p>
Like <a class="link" href="libmate-mate-exec.html#mate-execute-async-with-env-fds" title="mate_execute_async_with_env_fds ()"><code class="function">mate_execute_async_with_env_fds()</code></a>, but doesn't add
anything to child's environment.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>dir</code></em> :</span></p></td>
<td>Directory in which child should be executed, or <a href="/opt/mate2/share/gtk-doc/html/liboil/liboil-liboiljunk.html#NULL--CAPS"><code class="literal">NULL</code></a> for current
      directory
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>argc</code></em> :</span></p></td>
<td>Number of arguments
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>argv</code></em> :</span></p></td>
<td>Argument vector to exec child
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>close_fds</code></em> :</span></p></td>
<td>If <code class="literal">TRUE</code>, will close all but file descriptors 0, 1 and 2.
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> process id of child, or <code class="literal">-1</code> on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="mate-execute-async-with-env"></a><h3>mate_execute_async_with_env ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 mate_execute_async_with_env        (<em class="parameter"><code>const <span class="type">char</span> *dir</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> argc</code></em>,
                                                         <em class="parameter"><code><span class="type">char</span> * const argv[]</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> envc</code></em>,
                                                         <em class="parameter"><code><span class="type">char</span> * const envv[]</code></em>);</pre>
<p>
This function forks and executes some program in the
background.  On error, returns <code class="literal">-1</code>; in this case, <span class="type">errno</span> should hold a useful
value.  Searches the path to find the child.  Environment settings in <em class="parameter"><code>envv</code></em>
are added to the existing environment -- they do not completely replace it.
This function closes all fds besides 0, 1, and 2 for the child
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>dir</code></em> :</span></p></td>
<td>Directory in which child should be executed, or NULL for current
      directory
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>argc</code></em> :</span></p></td>
<td>Number of arguments
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>argv</code></em> :</span></p></td>
<td>Argument vector to exec child
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>envc</code></em> :</span></p></td>
<td>Number of environment slots
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>envv</code></em> :</span></p></td>
<td>Environment vector
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> the process id, or <code class="literal">-1</code> on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="mate-execute-async-with-env-fds"></a><h3>mate_execute_async_with_env_fds ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 mate_execute_async_with_env_fds    (<em class="parameter"><code>const <span class="type">char</span> *dir</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> argc</code></em>,
                                                         <em class="parameter"><code><span class="type">char</span> * const argv[]</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> envc</code></em>,
                                                         <em class="parameter"><code><span class="type">char</span> * const envv[]</code></em>,
                                                         <em class="parameter"><code><span class="type">gboolean</span> close_fds</code></em>);</pre>
<p>
Like <a class="link" href="libmate-mate-exec.html#mate-execute-async-with-env" title="mate_execute_async_with_env ()"><code class="function">mate_execute_async_with_env()</code></a> but has a flag to
decide whether or not to close fd's
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>dir</code></em> :</span></p></td>
<td>Directory in which child should be executed, or <a href="/opt/mate2/share/gtk-doc/html/liboil/liboil-liboiljunk.html#NULL--CAPS"><code class="literal">NULL</code></a> for current
      directory
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>argc</code></em> :</span></p></td>
<td>Number of arguments
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>argv</code></em> :</span></p></td>
<td>Argument vector to exec child
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>envc</code></em> :</span></p></td>
<td>Number of environment slots
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>envv</code></em> :</span></p></td>
<td>Environment vector
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>close_fds</code></em> :</span></p></td>
<td>If <code class="literal">TRUE</code> will close all fds but 0,1, and 2
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> the process id, or <code class="literal">-1</code> on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="mate-execute-shell"></a><h3>mate_execute_shell ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 mate_execute_shell                 (<em class="parameter"><code>const <span class="type">char</span> *dir</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *commandline</code></em>);</pre>
<p>
Like <a class="link" href="libmate-mate-exec.html#mate-execute-async-with-env" title="mate_execute_async_with_env ()"><code class="function">mate_execute_async_with_env()</code></a>, but uses the user's shell
to run the desired program.  Note that the pid of the shell is returned, not
the pid of the user's program.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>dir</code></em> :</span></p></td>
<td>Directory in which child should be executed, or <a href="/opt/mate2/share/gtk-doc/html/liboil/liboil-liboiljunk.html#NULL--CAPS"><code class="literal">NULL</code></a> for current
      directory
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>commandline</code></em> :</span></p></td>
<td>Shell command to execute
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> process id of shell, or <code class="literal">-1</code> on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="mate-execute-shell-fds"></a><h3>mate_execute_shell_fds ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 mate_execute_shell_fds             (<em class="parameter"><code>const <span class="type">char</span> *dir</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *commandline</code></em>,
                                                         <em class="parameter"><code><span class="type">gboolean</span> close_fds</code></em>);</pre>
<p>
Like <a class="link" href="libmate-mate-exec.html#mate-execute-async-with-env-fds" title="mate_execute_async_with_env_fds ()"><code class="function">mate_execute_async_with_env_fds()</code></a>, but uses the user's
shell to run the desired program.  Note that the pid of the shell is
returned, not the pid of the user's program.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>dir</code></em> :</span></p></td>
<td>Directory in which child should be executed, or <a href="/opt/mate2/share/gtk-doc/html/liboil/liboil-liboiljunk.html#NULL--CAPS"><code class="literal">NULL</code></a> for current
      directory
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>commandline</code></em> :</span></p></td>
<td>Shell command to execute
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>close_fds</code></em> :</span></p></td>
<td>Like close_fds in <a class="link" href="libmate-mate-exec.html#mate-execute-async-with-env-fds" title="mate_execute_async_with_env_fds ()"><code class="function">mate_execute_async_with_env_fds()</code></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> process id of shell, or <code class="literal">-1</code> on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="mate-prepend-terminal-to-vector"></a><h3>mate_prepend_terminal_to_vector ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                mate_prepend_terminal_to_vector    (<em class="parameter"><code><span class="type">int</span> *argc</code></em>,
                                                         <em class="parameter"><code><span class="type">char</span> ***argv</code></em>);</pre>
<p>
Prepends a terminal (either the one configured as default in
the user's MATE setup, or one of the common xterm emulators) to the passed
in vector, modifying it in the process.  The vector should be allocated with
<span class="type">g_malloc</span>, as this will <span class="type">g_free</span> the original vector.  Also all elements must
have been allocated separately.  That is the standard glib/MATE way of
doing vectors however.  If the integer that <em class="parameter"><code>argc</code></em> points to is negative, the
size will first be computed.  Also note that passing in pointers to a vector
that is empty, will just create a new vector for you.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>argc</code></em> :</span></p></td>
<td>a pointer to the vector size
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>argv</code></em> :</span></p></td>
<td>a pointer to the vector
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="mate-execute-terminal-shell"></a><h3>mate_execute_terminal_shell ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 mate_execute_terminal_shell        (<em class="parameter"><code>const <span class="type">char</span> *dir</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *commandline</code></em>);</pre>
<p>
Like <a class="link" href="libmate-mate-exec.html#mate-execute-async" title="mate_execute_async ()"><span class="type">mate_execute_async</span></a>, except that it runs the
terminal as well.  Note that the pid of the terminal is
returned, not the pid of the user's program.
If commandline is <a href="/opt/mate2/share/gtk-doc/html/liboil/liboil-liboiljunk.html#NULL--CAPS"><code class="literal">NULL</code></a>, just the shell is run.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>dir</code></em> :</span></p></td>
<td>Directory in which child should be executed, or NULL for current
      directory
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>commandline</code></em> :</span></p></td>
<td>Shell command to execute
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> process id of terminal, or <code class="literal">-1</code> on error.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="mate-execute-terminal-shell-fds"></a><h3>mate_execute_terminal_shell_fds ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 mate_execute_terminal_shell_fds    (<em class="parameter"><code>const <span class="type">char</span> *dir</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *commandline</code></em>,
                                                         <em class="parameter"><code><span class="type">gboolean</span> close_fds</code></em>);</pre>
<p>
Like <a class="link" href="libmate-mate-exec.html#mate-execute-shell-fds" title="mate_execute_shell_fds ()"><code class="function">mate_execute_shell_fds()</code></a>, except that it runs the
terminal as well.  Note that the pid of the terminal is
returned, not the pid of the user's program.
If commandline is <a href="/opt/mate2/share/gtk-doc/html/liboil/liboil-liboiljunk.html#NULL--CAPS"><code class="literal">NULL</code></a>, just the shell is run.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>dir</code></em> :</span></p></td>
<td>Directory in which child should be executed, or <a href="/opt/mate2/share/gtk-doc/html/liboil/liboil-liboiljunk.html#NULL--CAPS"><code class="literal">NULL</code></a> for current
      directory
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>commandline</code></em> :</span></p></td>
<td>Shell command to execute
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>close_fds</code></em> :</span></p></td>
<td>Like close_fds in <a class="link" href="libmate-mate-exec.html#mate-execute-async-with-env-fds" title="mate_execute_async_with_env_fds ()"><code class="function">mate_execute_async_with_env_fds()</code></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> process id of terminal, or <code class="literal">-1</code> on error.
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.15.1</div>
</body>
</html>